(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{51:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var s,r,n=a(0),c=a(1),i=a.n(c),o=a(44),l=a.n(o),d=(a(51),a(26)),m=a(4),j=a(5),h=a(7),u=a(6),p=a(13),b=a.n(p),g=a(16),x=a(12),O=a.n(x),v=a(17),f=a.n(v),y=a(18),N=a.n(y),w=new N.a({encodingType:"aes"}),I=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={errors:[],errorMessage:"",passwordIndex:0,emailIndex:0},e.usersLogin={email:"",password:""},e.formsLoginData=function(t){e.usersLogin[t.target.name]=t.target.value.trim()},e.schema=O.a.object({email:O.a.string().email({tlds:{allow:["com","net"]}}).messages({"string.email":"email  must be a valid email","string.empty":"email is not allowed to be empty"}),password:O.a.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$"))}),e.sendLoginData=Object(g.a)(b.a.mark((function t(){var a,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.post("https://route-egypt-api.herokuapp.com/signin",e.usersLogin);case 2:a=t.sent,"success"===(s=a.data).message?(w.set("currentUser",s.token),e.props.isAuth(!0),e.props.history.replace("/home")):e.setState({errorMessage:s.message});case 5:case"end":return t.stop()}}),t)}))),e.sendFormData=function(){var t=e.schema.validate(e.usersLogin,{abortEarly:!1});t.error?e.setState({errors:t.error.details,passwordIndex:t.error.details.findIndex((function(e){return"password"===e.path[0]})),emailIndex:t.error.details.findIndex((function(e){return"email"===e.path[0]}))}):(e.setState({errors:[]}),e.sendLoginData())},e}return Object(j.a)(a,[{key:"render",value:function(){return Object(n.jsx)(c.Fragment,{children:Object(n.jsx)("div",{className:"container my-5 py-5",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(n.jsx)("h1",{className:"mb-5",children:"Login Now"}),Object(n.jsx)("input",{onKeyUp:this.formsLoginData,className:"form-control my-2",placeholder:"Enter your email",name:"email",type:"text"}),this.state.errors.find((function(e){return"email"===e.path[0]}))?Object(n.jsx)("div",{className:"alert alert-danger",children:this.state.errors[this.state.emailIndex].message}):null,Object(n.jsx)("input",{onKeyUp:this.formsLoginData,className:"form-control my-2",placeholder:"Enter your password",type:"password",name:"password"}),this.state.errors.find((function(e){return"password"===e.path[0]}))?Object(n.jsx)("div",{className:"alert alert-danger",children:this.state.errors[this.state.passwordIndex].message}):null,Object(n.jsx)("button",{onClick:this.sendFormData,className:"btn btn-info mt-3",children:"Login"}),0===this.state.errors.length?null:Object(n.jsx)("div",{className:"alert alert-danger my-2",children:"please check all constraints inputs"}),this.state.errorMessage&&Object(n.jsx)("div",{className:"alert alert-danger my-2",children:this.state.errorMessage})]})})})})}}]),a}(c.Component),k=a(14),L=a(21),_=new N.a({encodingType:"aes"}),C=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={isLogIn:!1},e}return Object(j.a)(a,[{key:"logOut",value:function(e){"logout"===e.target.name&&(_.removeAll(),this.setState({isLogIn:!1}))}},{key:"render",value:function(){var e=this;try{s=_.get("currentUser"),r=Object(L.a)(s),console.log(r)}catch(t){r="",console.log("decode",r)}return console.log("isLogIn",this.state.isLogIn),Object(n.jsx)(c.Fragment,{children:Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-transparent",children:[Object(n.jsx)("a",{className:"navbar-brand ",href:"/",children:""!==r||this.state.isLogIn?"welcome ".concat(r.first_name," ").concat(r.last_name):"LastNews"}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(n.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(k.b,{className:"nav-link text-white",to:"/register",children:""!==r||this.state.isLogOut?"":"Register"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(k.b,{className:"nav-link text-white",to:"/login",children:""!==r||this.state.isLogOut?"":"Login"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(k.b,{className:"nav-link text-white",to:"/login",name:"logout",onClick:function(t){e.logOut(t)},children:""!==r||this.state.isLogOut?"Logout":""})})]})})]})})}}]),a}(c.Component),D=a(20),A=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props,t=e.trendingMovie,a=e.trendingTv;return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsxs)("div",{className:"row py-5",children:[Object(n.jsxs)("div",{className:"col-md-4",children:[Object(n.jsx)("div",{className:"my-border w-25 my-3"}),Object(n.jsxs)("h3",{children:["trending",Object(n.jsx)("br",{})," movies",Object(n.jsx)("br",{})," to watch right now"]}),Object(n.jsx)("p",{className:"my-3 secondFontColor",children:"most watched movies by days"}),Object(n.jsx)("div",{className:"my-border my-3"})]}),t.slice(0,10).map((function(e,t){return Object(n.jsx)("div",{className:"col-md-2",children:Object(n.jsxs)("div",{className:"movie position-relative",children:[Object(n.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(e.poster_path),className:"w-100",alt:""}),Object(n.jsxs)("h4",{className:"py-2 h6",children:[e.title,e.name]}),Object(n.jsx)("div",{className:"vote position-absolute",children:e.vote_average})]})},t)}))]}),Object(n.jsxs)("div",{className:"row py-5",children:[Object(n.jsxs)("div",{className:"col-md-4",children:[Object(n.jsx)("div",{className:"my-border w-25 my-3"}),Object(n.jsxs)("h3",{children:["trending",Object(n.jsx)("br",{})," Tv",Object(n.jsx)("br",{})," to watch right now"]}),Object(n.jsx)("p",{className:"my-3 secondFontColor",children:"most watched Tv by days"}),Object(n.jsx)("div",{className:"my-border my-3"})]}),a.slice(0,10).map((function(e,t){return Object(n.jsx)("div",{className:"col-md-2",children:Object(n.jsxs)("div",{className:"movie position-relative",children:[Object(n.jsx)("img",{src:"https://image.tmdb.org/t/p/w500/".concat(e.poster_path),className:"w-100",alt:""}),Object(n.jsxs)("h4",{className:"py-2 h6",children:[e.title,e.name]}),Object(n.jsx)("div",{className:"vote position-absolute",children:e.vote_average})]})},t)}))]})]})}}]),a}(c.Component),F=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],tv:[]},e.getTrending=function(){var t=Object(g.a)(b.a.mark((function t(a){var s,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("https://api.themoviedb.org/3/trending/".concat(a,"/week?api_key=feb2edceda35691d0b91bef595f0bdef"));case 2:s=t.sent,r=s.data,e.setState(Object(D.a)({},a,r.results));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getTrending("movies"),this.getTrending("tv")}},{key:"render",value:function(){var e=this.state,t=e.movies,a=e.tv;return Object(n.jsx)(i.a.Fragment,{children:Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(A,{trendingMovie:t,trendingTv:a})})})}}]),a}(c.Component),S=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={errors:[],first_nameIndex:0,last_nameIndex:0,passwordIndex:0,ageIndex:0,emailIndex:0,errorMessage:""},e.users={first_name:"",last_name:"",email:"",password:"",age:""},e.formsData=function(t){e.users[t.target.name]=t.target.value.trim()},e.schema=O.a.object({first_name:O.a.string().pattern(new RegExp("^([a-zA-Z]+\\s*[A-Z]*)+$")).required().messages({"string.pattern.base":"Characters Only","string.empty":"First Name is not allowed to be empty"}),last_name:O.a.string().pattern(new RegExp("^([a-zA-Z]+\\s*[A-Z]*)+$")).required().messages({"string.pattern.base":"Characters Only","string.empty":"Last Name is not allowed to be empty"}),email:O.a.string().email({tlds:{allow:["com","net"]}}).messages({"string.email":"email  must be a valid email","string.empty":"email is not allowed to be empty"}),password:O.a.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")),age:O.a.number().integer().min(10).max(80)}),e.sendRegisterData=Object(g.a)(b.a.mark((function t(){var a,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.post("https://route-egypt-api.herokuapp.com/signup",e.users);case 2:a=t.sent,"success"===(s=a.data).message?e.props.history.replace("/login"):(console.log("Not ! Success"),e.setState({errorMessage:s.message}));case 5:case"end":return t.stop()}}),t)}))),e.sendData=function(){var t=e.schema.validate(e.users,{abortEarly:!1});console.log(t),t.error?e.setState({errors:t.error.details,first_nameIndex:t.error.details.findIndex((function(e){return"first_name"===e.path[0]})),last_nameIndex:t.error.details.findIndex((function(e){return"last_name"===e.path[0]})),passwordIndex:t.error.details.findIndex((function(e){return"password"===e.path[0]})),ageIndex:t.error.details.findIndex((function(e){return"age"===e.path[0]})),emailIndex:t.error.details.findIndex((function(e){return"email"===e.path[0]}))}):(e.setState({errors:[]}),e.sendRegisterData())},e}return Object(j.a)(a,[{key:"render",value:function(){return Object(n.jsx)(c.Fragment,{children:Object(n.jsx)("div",{className:"container my-5 py-5",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(n.jsx)("h1",{className:"mb-5",children:"Register Now"}),Object(n.jsx)("input",{name:"first_name",onKeyUp:this.formsData,type:"text",className:"form-control my-3",placeholder:"Enter Your First Name"}),this.state.errors.find((function(e){return"first_name"===e.path[0]}))?Object(n.jsx)("div",{className:"alert alert-danger",children:this.state.errors[this.state.first_nameIndex].message}):null,Object(n.jsx)("input",{name:"last_name",onKeyUp:this.formsData,type:"text",className:"form-control",placeholder:"Enter Your Last  Name"}),this.state.errors.find((function(e){return"last_name"===e.path[0]}))?Object(n.jsx)("div",{className:"alert alert-danger",children:this.state.errors[this.state.last_nameIndex].message}):null,Object(n.jsx)("input",{name:"email",onKeyUp:this.formsData,className:"form-control my-3",placeholder:"Enter your email",type:"text"}),this.state.errors.find((function(e){return"email"===e.path[0]}))?Object(n.jsx)("div",{className:"alert alert-danger",children:this.state.errors[this.state.emailIndex].message}):null,Object(n.jsx)("input",{name:"password",onKeyUp:this.formsData,className:"form-control my-3",placeholder:"Enter your password",type:"password"}),this.state.errors.find((function(e){return"password"===e.path[0]}))?Object(n.jsx)("div",{className:"alert alert-danger",children:this.state.errors[this.state.passwordIndex].message}):null,Object(n.jsx)("input",{name:"age",onKeyUp:this.formsData,type:"number",placeholder:"Enter your age",className:"form-control"}),this.state.errors.find((function(e){return"age"===e.path[0]}))?Object(n.jsx)("div",{className:"alert alert-danger",children:this.state.errors[this.state.ageIndex].message}):null,Object(n.jsx)("button",{onClick:this.sendData,className:"btn btn-info mt-3",children:"Register"}),0===this.state.errors.length?null:Object(n.jsx)("div",{className:"alert alert-danger my-2",children:"please check all constraints inputs"}),this.state.errorMessage&&Object(n.jsx)("div",{className:"alert alert-danger my-2",children:this.state.errorMessage})]})})})})}}]),a}(c.Component),E=a(2),T=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(n.jsx)(c.Fragment,{children:Object(n.jsx)("div",{className:"d-flex justify-content-center align-items-center text-center vh-100",children:Object(n.jsx)("h1",{children:"404 Not Found Page"})})})}}]),a}(c.Component),M=new N.a({encodingType:"aes"}),U=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=M.get("currentUser");try{var t=Object(L.a)(e)}catch(a){return localStorage.clear(),Object(n.jsx)(E.a,{to:"/login"})}return this.props.isAuth||t?(console.log(t),Object(n.jsx)(E.b,{path:this.props.path,component:this.props.component})):Object(n.jsx)(E.a,{to:"/login"})}}]),a}(c.Component),R=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedIn:!1},e.isAuth=function(t){e.setState({isLoggedIn:t})},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(C,{}),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(E.d,{children:[Object(n.jsx)(U,{isAuth:this.state.isLoggedIn,path:"/home",component:F}),Object(n.jsx)(E.b,{path:"/register",component:S}),Object(n.jsx)(E.b,{path:"/login",render:function(t){return Object(n.jsx)(I,Object(d.a)(Object(d.a)({},t),{},{isAuth:e.isAuth}))}}),Object(n.jsx)(E.b,{path:"/notfound",component:T}),Object(n.jsx)(E.a,{from:"/",exact:!0,to:"/register"}),Object(n.jsx)(E.a,{to:"/notfound"})]})})]})}}]),a}(c.Component),K=(a(94),a(95),a(96),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,101)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))});l.a.render(Object(n.jsx)(k.a,{children:Object(n.jsx)(R,{})}),document.getElementById("root")),K()}},[[99,1,2]]]);
//# sourceMappingURL=main.838128fe.chunk.js.map